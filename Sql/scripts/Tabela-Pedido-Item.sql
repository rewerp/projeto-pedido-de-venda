CREATE TABLE PEDIDO_ITEM (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NUMERO_PEDIDO INTEGER NOT NULL,
    CODIGO_PRODUTO INTEGER NOT NULL,
    QUANTIDADE NUMERIC(15,4) NOT NULL,
    VLR_UNITARIO NUMERIC(15,2) NOT NULL,
    VLR_TOTAL NUMERIC(15,2) COMPUTED BY (QUANTIDADE * VLR_UNITARIO),
    CONSTRAINT FK_ITEM_PEDIDO FOREIGN KEY (NUMERO_PEDIDO) REFERENCES PEDIDO(NUMERO_PEDIDO) ON DELETE CASCADE,
    CONSTRAINT FK_ITEM_PRODUTO FOREIGN KEY (CODIGO_PRODUTO) REFERENCES PRODUTO(CODIGO)
);

CREATE INDEX IDX_PEDIDO_ITEM_NUMERO_PEDIDO ON PEDIDO_ITEM (NUMERO_PEDIDO);